(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30210,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(25949),r=e.i(33369),l=["axis","item"],n=(0,s.forwardRef)((e,t)=>s.createElement(r.CartesianChart,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:l,tooltipPayloadSearcher:a.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),o=e.i(75225),d=e.i(85183),i=e.i(93230),c=e.i(72526),x=e.i(34239),m=e.i(59559),h=e.i(31195),u=e.i(41891),p=e.i(38814),b=e.i(22787),g=e.i(237),v=e.i(1725),j=e.i(21417),y=e.i(55706);let f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],N=[22,20,20,22,21,19,21,19,20,20,18,22],P=e=>Array(12).fill(Math.round(e/12)),w={overheadPct:32,materialsPct:40,revenuePerManHour:145,commissionPct:7,jobSuppliesPct:2.5,nonDirectLaborPct:2,teamMembers:14,totalManHours:11500,monthRevPct:[.07,.05,.06,.07,.08,.09,.12,.1,.1,.1,.09,.07],crewsByMonth:[1,1,1,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5],products:[{name:"Vinyl",pct:25,avgSale:8250,color:"#3b82f6"},{name:"Aluminum",pct:6,avgSale:5500,color:"#22c55e"},{name:"Wood",pct:40,avgSale:14300,color:"#eab308"},{name:"Chainlink",pct:8,avgSale:10450,color:"#ef4444"},{name:"Avimore",pct:19,avgSale:14850,color:"#a855f7"},{name:"Steel",pct:1.5,avgSale:11550,color:"#ec4899"},{name:"Bufftech",pct:0,avgSale:30800,color:"#06b6d4"},{name:"Gate Ops",pct:0,avgSale:12650,color:"#84cc16"},{name:"Prefirt",pct:0,avgSale:1.1,color:"#f97316"}],payrollTaxRate:13,overheadItems:[{name:"Rent",monthly:P(48e3)},{name:"Advertising",monthly:[5e3,5e3,1e4,12e3,14e3,16e3,18e3,14e3,14e3,1e4,8e3,4e3]},{name:"Insurance",monthly:P(58e3)},{name:"OH Payroll",monthly:P(2e5)},{name:"Utilities",monthly:P(3e4)},{name:"Fuel",monthly:P(2e4)},{name:"Benefits",monthly:P(42e3)},{name:"Leases",monthly:P(2e4)},{name:"Repairs",monthly:P(12e3)},{name:"Small Tools",monthly:P(1e4)},{name:"Office Supplies",monthly:P(26e3)},{name:"Prof Fees",monthly:P(12e3)},{name:"Bad Debts",monthly:P(7500)},{name:"Education",monthly:P(1500)},{name:"Travel",monthly:P(2e3)},{name:"Uniforms",monthly:P(2500)},{name:"Shop Supplies",monthly:P(3e3)},{name:"Shipping",monthly:P(300)},{name:"Dump Fees",monthly:P(500)},{name:"Meals",monthly:P(800)},{name:"Entertainment",monthly:P(1e3)},{name:"Misc",monthly:P(2e3)}],crew:[{name:"Kyle Hall",annual:6e4,months:[1,1,1,1,1,1,1,1,1,1,1,1]},{name:"David Hall",annual:52e3,months:[1,1,1,1,1,1,1,1,1,1,1,1]},{name:"Crew Lead 3",annual:38e3,months:[0,0,0,1,1,1,1,1,1,1,1,1]},{name:"Crew Lead 4",annual:38e3,months:[0,0,0,1,1,1,1,1,1,1,1,1]},{name:"Installer 5",annual:38e3,months:[0,0,0,1,1,1,1,1,1,1,1,1]}],shopManager:{name:"Tom (Shop)",annual:45e3},debts:[{name:"Blue F150",annual:9600},{name:"Emmer LOC",annual:48e3}]};function M(e){return e>=0?"$"+Math.round(e).toLocaleString():"($"+Math.abs(Math.round(e)).toLocaleString()+")"}function S(e){return e>=0?"$"+(e/1e3).toFixed(0)+"K":"($"+(Math.abs(e)/1e3).toFixed(0)+"K)"}function C(e){return e.toFixed(1)+"%"}function T({label:e,value:s,subtext:a,positive:r}){let l="string"==typeof s&&s.startsWith("(");return(0,t.jsxs)("div",{className:`rounded-xl p-4 ${l?"bg-red-50 border border-red-200":r?"bg-green-50 border border-green-200":"bg-white border border-gray-200"}`,children:[(0,t.jsx)("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:e}),(0,t.jsx)("div",{className:`text-2xl font-bold mt-1 ${l?"text-red-600":r?"text-green-600":"text-gray-900"}`,children:s}),a&&(0,t.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:a})]})}function k({label:e,value:s,onChange:a,min:r,max:l,step:n,suffix:o,prefix:d}){return(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-600",children:e}),(0,t.jsxs)("span",{className:"text-xs font-bold text-blue-700",children:[d||"","number"==typeof s?s.toLocaleString():s,o||""]})]}),(0,t.jsx)("input",{type:"range",min:r,max:l,step:n,value:s,onChange:e=>a(parseFloat(e.target.value)),className:"w-full"})]})}function R({title:e,children:s,color:a}){return(0,t.jsxs)("div",{className:`border-l-4 ${{blue:"border-blue-500 bg-blue-50",green:"border-green-500 bg-green-50",amber:"border-amber-500 bg-amber-50",red:"border-red-500 bg-red-50",purple:"border-purple-500 bg-purple-50"}[a||"blue"]} rounded-r-xl p-4 mb-4`,children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-800 mb-3",children:e}),s]})}function A(){let[e,a]=(0,s.useState)(w),[r,l]=(0,s.useState)("dashboard"),[A,D]=(0,s.useState)(!1),[O,L]=(0,s.useState)(!1),[I,$]=(0,s.useState)(""),[B,G]=(0,s.useState)(""),[F,H]=(0,s.useState)(!1),K=(e,t)=>a(s=>({...s,[e]:t})),z=(0,s.useMemo)(()=>{let t=e.crew.reduce((e,t)=>e+t.annual,0)+e.shopManager.annual,s=t*(e.payrollTaxRate/100),a=e.overheadItems.reduce((e,t)=>e+t.monthly.reduce((e,t)=>e+t,0),0)+s,r=a/(e.overheadPct/100),l=t+r*e.commissionPct/100,n=l/r*100,o=100-e.overheadPct-n-e.materialsPct,d=r*o/100,i=r*e.materialsPct/100,c=100-n-e.materialsPct-e.jobSuppliesPct-e.nonDirectLaborPct,x=r*(n+e.materialsPct+e.jobSuppliesPct+e.nonDirectLaborPct)/100,m=e.products.reduce((e,t)=>e+(t.avgSale>1?r*t.pct/100/t.avgSale:0),0),h=e.monthRevPct.reduce((e,t)=>e+t,0),u=f.map((t,a)=>{let l=r*(e.monthRevPct[a]/h),o=l*(n+e.materialsPct+e.jobSuppliesPct+e.nonDirectLaborPct)/100,d=l-o,i=e.overheadItems.reduce((e,t)=>e+t.monthly[a],0)+s/12;return{month:t,revenue:l,cogs:o,grossMargin:d,overhead:i,netProfit:d-i,prodDays:N[a],crews:e.crewsByMonth[a],cumProfit:0}}),p=0;u.forEach(e=>{p+=e.netProfit,e.cumProfit=p});let b=e=>({revenue:e.reduce((e,t)=>e+t.revenue,0),grossMargin:e.reduce((e,t)=>e+t.grossMargin,0),netProfit:e.reduce((e,t)=>e+t.netProfit,0)}),g=[{q:"Q1",...b(u.slice(0,3))},{q:"Q2",...b(u.slice(3,6))},{q:"Q3",...b(u.slice(6,9))},{q:"Q4",...b(u.slice(9,12))}],v=e.products.map(e=>({name:e.name,value:Math.round(r*e.pct/100),pct:e.pct,projects:e.avgSale>1?Math.round(r*e.pct/100/e.avgSale):0,color:e.color})),j=e.overheadItems.map(e=>({name:e.name,value:e.monthly.reduce((e,t)=>e+t,0)})).concat([{name:"Payroll Tax",value:Math.round(s)}]).sort((e,t)=>t.value-e.value),y=e.debts.reduce((e,t)=>e+t.annual,0),P=e.revenuePerManHour*e.totalManHours;return{revenueGoal:r,totalOverhead:a,totalCOGSLabor:l,laborPct:n,netProfitPct:o,netProfitDollars:d,materialsDollars:i,grossMarginPct:c,grossMargin:r-x,cogsTotal:x,numProjects:m,avgSale:m>0?r/m:0,monthly:u,quarters:g,productData:v,overheadBreakdown:j,debtService:y,cashAfterDebt:d-y,directLabor:t,payrollTaxes:s,prev2025:{revenue:1951097,netProfit:-254809,overheadPct:37,materialsPct:39,projects:177},manHourCapacity:P,capacityGap:P-r}},[e]),E=e.overheadItems.map((e,t)=>({i:t,annual:e.monthly.reduce((e,t)=>e+t,0)})).sort((e,t)=>t.annual-e.annual).slice(0,12).map(e=>e.i).sort((e,t)=>e-t);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-900 to-blue-700 text-white px-6 py-4",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"The Fence Company"}),(0,t.jsx)("p",{className:"text-blue-200 text-sm",children:"2026 Budget Matrix Dashboard"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>{$(""),L("load"),G("")},className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-blue-800 hover:bg-blue-600 border border-blue-500",children:"Load"}),(0,t.jsx)("button",{onClick:()=>{$(JSON.stringify(e)),L("save"),G("")},className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-blue-800 hover:bg-blue-600 border border-blue-500",children:"Save"}),(0,t.jsxs)("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${z.netProfitDollars>=0?"bg-green-500":"bg-red-500"}`,children:["Net: ",M(z.netProfitDollars)]}),(0,t.jsxs)("div",{className:"text-right text-sm",children:[(0,t.jsx)("div",{className:"text-blue-200",children:"Revenue Target"}),(0,t.jsx)("div",{className:"text-xl font-bold",children:M(z.revenueGoal)})]})]})]})}),(0,t.jsx)("div",{className:"bg-white border-b sticky top-0 z-10",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto flex",children:[{id:"dashboard",label:"Dashboard"},{id:"monthly",label:"Monthly"},{id:"products",label:"Products"},{id:"overhead",label:"Overhead"},{id:"crew",label:"Crew"}].map(e=>(0,t.jsx)("button",{onClick:()=>l(e.id),className:`px-5 py-3 text-sm font-medium border-b-2 transition-colors ${r===e.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.label},e.id))})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:["dashboard"===r&&(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-4 space-y-4",children:[(0,t.jsxs)(R,{title:"Key Business Levers",color:"blue",children:[(0,t.jsx)(k,{label:"Overhead %",value:e.overheadPct,onChange:e=>K("overheadPct",e),min:25,max:45,step:.5,suffix:"%"}),(0,t.jsx)(k,{label:"Materials %",value:e.materialsPct,onChange:e=>K("materialsPct",e),min:25,max:50,step:.5,suffix:"%"}),(0,t.jsx)(k,{label:"Commission %",value:e.commissionPct,onChange:e=>K("commissionPct",e),min:3,max:12,step:.5,suffix:"%"}),(0,t.jsx)(k,{label:"Job Supplies %",value:e.jobSuppliesPct,onChange:e=>K("jobSuppliesPct",e),min:1,max:5,step:.25,suffix:"%"}),(0,t.jsx)(k,{label:"Revenue / Man Hour",value:e.revenuePerManHour,onChange:e=>K("revenuePerManHour",e),min:100,max:200,step:5,prefix:"$"}),(0,t.jsx)(k,{label:"Total Man Hours",value:e.totalManHours,onChange:e=>K("totalManHours",e),min:5e3,max:25e3,step:500})]}),(0,t.jsx)(R,{title:"4 Buckets Breakdown",color:"green",children:(0,t.jsx)("div",{className:"space-y-2",children:[{label:"Overhead",pct:e.overheadPct,val:z.totalOverhead,color:"bg-blue-500"},{label:"Labor & Comm.",pct:z.laborPct,val:z.totalCOGSLabor,color:"bg-amber-500"},{label:"Materials",pct:e.materialsPct,val:z.materialsDollars,color:"bg-red-500"},{label:"Net Profit",pct:z.netProfitPct,val:z.netProfitDollars,color:z.netProfitPct>=0?"bg-green-500":"bg-red-600"}].map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,t.jsx)("span",{className:"font-medium",children:e.label}),(0,t.jsxs)("span",{children:[C(e.pct)," = ",M(e.val)]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:`${e.color} h-2 rounded-full transition-all`,style:{width:`${Math.max(0,Math.min(100,e.pct))}%`}})})]},e.label))})}),(0,t.jsx)(R,{title:"2025 vs 2026",color:"purple",children:(0,t.jsx)("div",{className:"space-y-2 text-xs",children:[{label:"Revenue",v25:z.prev2025.revenue,v26:z.revenueGoal},{label:"Net Profit",v25:z.prev2025.netProfit,v26:z.netProfitDollars},{label:"Overhead %",v25:z.prev2025.overheadPct,v26:e.overheadPct,isPct:!0},{label:"Materials %",v25:z.prev2025.materialsPct,v26:e.materialsPct,isPct:!0},{label:"Projects",v25:z.prev2025.projects,v26:Math.round(z.numProjects),isNum:!0}].map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 w-24",children:e.label}),(0,t.jsx)("span",{className:"text-gray-400 w-24 text-right",children:e.isPct?C(e.v25):e.isNum?e.v25:M(e.v25)}),(0,t.jsx)("span",{className:"text-gray-900 font-medium w-24 text-right",children:e.isPct?C(e.v26):e.isNum?Math.round(e.v26):M(e.v26)}),(0,t.jsx)("span",{className:`w-16 text-right font-bold ${(e.isPct?e.v26<e.v25:e.v26>e.v25)?"text-green-600":"text-red-600"}`,children:e.isPct?(e.v26-e.v25).toFixed(1)+"pp":e.isNum?(e.v26-e.v25>0?"+":"")+(e.v26-e.v25):(e.v26-e.v25>=0?"+":"")+S(e.v26-e.v25)})]},e.label))})})]}),(0,t.jsxs)("div",{className:"col-span-8 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-3",children:[(0,t.jsx)(T,{label:"Revenue Goal",value:M(z.revenueGoal),subtext:Math.round(z.numProjects)+" projects @ "+M(z.avgSale)+" avg"}),(0,t.jsx)(T,{label:"Man-Hour Capacity",value:M(z.manHourCapacity),subtext:e.totalManHours.toLocaleString()+" hrs @ "+M(e.revenuePerManHour)+"/hr",positive:z.capacityGap>=0}),(0,t.jsx)(T,{label:"Gross Margin",value:M(z.grossMargin),subtext:C(z.grossMarginPct),positive:z.grossMarginPct>30}),(0,t.jsx)(T,{label:"Total Overhead",value:M(z.totalOverhead),subtext:C(e.overheadPct)}),(0,t.jsx)(T,{label:"Net Profit",value:M(z.netProfitDollars),subtext:C(z.netProfitPct),positive:z.netProfitDollars>0})]}),z.capacityGap<0&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-xs text-red-700 font-medium",children:["Capacity shortfall: Your crews can produce ",M(z.manHourCapacity)," but you need ",M(z.revenueGoal)," — gap of ",M(Math.abs(z.capacityGap)),". Increase man hours, $/hr, or reduce overhead."]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-800 mb-3",children:"Monthly Revenue vs Net Profit"}),(0,t.jsx)(h.ResponsiveContainer,{width:"100%",height:280,children:(0,t.jsxs)(j.ComposedChart,{data:z.monthly,children:[(0,t.jsx)(c.CartesianGrid,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,t.jsx)(d.XAxis,{dataKey:"month",tick:{fontSize:11}}),(0,t.jsx)(i.YAxis,{tickFormatter:S,tick:{fontSize:10}}),(0,t.jsx)(x.Tooltip,{formatter:M}),(0,t.jsx)(m.Legend,{wrapperStyle:{fontSize:11}}),(0,t.jsx)(o.Bar,{dataKey:"revenue",name:"Revenue",fill:"#3b82f6",radius:[4,4,0,0],opacity:.7}),(0,t.jsx)(o.Bar,{dataKey:"overhead",name:"Overhead",fill:"#f59e0b",radius:[4,4,0,0],opacity:.5}),(0,t.jsx)(y.Line,{dataKey:"netProfit",name:"Net Profit",stroke:"#10b981",strokeWidth:3,dot:{r:4}}),(0,t.jsx)(y.Line,{dataKey:"cumProfit",name:"Cumulative",stroke:"#8b5cf6",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})})]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-3",children:z.quarters.map(e=>(0,t.jsxs)("div",{className:`rounded-xl p-3 border ${e.netProfit>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[(0,t.jsx)("div",{className:"text-xs font-bold text-gray-500",children:e.q}),(0,t.jsx)("div",{className:"text-sm font-bold text-gray-900 mt-1",children:M(e.revenue)}),(0,t.jsxs)("div",{className:`text-xs font-bold mt-1 ${e.netProfit>=0?"text-green-600":"text-red-600"}`,children:["Net: ",M(e.netProfit)]}),(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["GM: ",M(e.grossMargin)]})]},e.q))}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-800 mb-2",children:"Cash Flow Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Net Operating Profit"}),(0,t.jsx)("div",{className:"text-lg font-bold",children:M(z.netProfitDollars)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Debt Service"}),(0,t.jsx)("div",{className:"text-lg font-bold text-red-600",children:M(-z.debtService)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Cash After Debt"}),(0,t.jsx)("div",{className:`text-lg font-bold ${z.cashAfterDebt>=0?"text-green-600":"text-red-600"}`,children:M(z.cashAfterDebt)})]})]})]})]})]}),"monthly"===r&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl border p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-800 mb-3",children:"Monthly Revenue Distribution"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Adjust each month's revenue target. Percentages auto-normalize to 100%."}),(0,t.jsx)("div",{className:"grid grid-cols-12 gap-2 mb-2",children:f.map((s,a)=>{let r=e.monthRevPct.reduce((e,t)=>e+t,0),l=e.monthRevPct[a]/r*100,n=Math.round(z.revenueGoal*e.monthRevPct[a]/r);return(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs font-bold text-gray-600 mb-1",children:s}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-1 top-1 text-xs text-gray-400",children:"$"}),(0,t.jsx)("input",{type:"number",value:Math.round(n/1e3),onChange:t=>{let s=1e3*(parseInt(t.target.value)||0),r=z.revenueGoal-n,l=r>0?s/(r+s):e.monthRevPct[a],o=[...e.monthRevPct];o[a]=l,K("monthRevPct",o)},className:"w-full text-xs text-center border rounded p-1 pl-3",title:"$"+n.toLocaleString()}),(0,t.jsxs)("div",{className:"text-xs text-gray-400 mt-0.5",children:[l.toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{type:"range",min:.01,max:.25,step:.005,value:e.monthRevPct[a],onChange:t=>{let s=[...e.monthRevPct];s[a]=parseFloat(t.target.value),K("monthRevPct",s)},className:"w-full",style:{height:"4px"}})})]},s)})}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs mt-2 pt-2 border-t",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:["Total: ",(0,t.jsx)("strong",{children:M(z.revenueGoal)})]}),(0,t.jsx)("button",{onClick:()=>K("monthRevPct",[.07,.05,.06,.07,.08,.09,.12,.1,.1,.1,.09,.07]),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Reset to Default"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-800 mb-3",children:"Monthly P&L Breakdown"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-xs",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b-2 border-gray-300",children:[(0,t.jsx)("th",{className:"text-left py-2 px-2 font-bold",children:"Month"}),(0,t.jsx)("th",{className:"text-right py-2 px-2",children:"Revenue"}),(0,t.jsx)("th",{className:"text-right py-2 px-2",children:"COGS"}),(0,t.jsx)("th",{className:"text-right py-2 px-2",children:"Gross Margin"}),(0,t.jsx)("th",{className:"text-right py-2 px-2",children:"GM %"}),(0,t.jsx)("th",{className:"text-right py-2 px-2",children:"Overhead"}),(0,t.jsx)("th",{className:"text-right py-2 px-2 font-bold",children:"Net Profit"}),(0,t.jsx)("th",{className:"text-right py-2 px-2",children:"Cumulative"}),(0,t.jsx)("th",{className:"text-right py-2 px-2",children:"Crews"})]})}),(0,t.jsxs)("tbody",{children:[z.monthly.map(e=>(0,t.jsxs)("tr",{className:`border-b ${e.netProfit>=0?"bg-green-50":"bg-red-50"}`,children:[(0,t.jsx)("td",{className:"py-2 px-2 font-bold",children:e.month}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:M(e.revenue)}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:M(e.cogs)}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:M(e.grossMargin)}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:e.revenue>0?C(e.grossMargin/e.revenue*100):"-"}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:M(e.overhead)}),(0,t.jsx)("td",{className:`text-right py-2 px-2 font-bold ${e.netProfit>=0?"text-green-700":"text-red-700"}`,children:M(e.netProfit)}),(0,t.jsx)("td",{className:`text-right py-2 px-2 ${e.cumProfit>=0?"text-green-600":"text-red-600"}`,children:M(e.cumProfit)}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:e.crews})]},e.month)),(0,t.jsxs)("tr",{className:"border-t-2 border-gray-800 font-bold bg-gray-100",children:[(0,t.jsx)("td",{className:"py-2 px-2",children:"TOTAL"}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:M(z.revenueGoal)}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:M(z.cogsTotal)}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:M(z.grossMargin)}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:C(z.grossMarginPct)}),(0,t.jsx)("td",{className:"text-right py-2 px-2",children:M(z.totalOverhead)}),(0,t.jsx)("td",{className:`text-right py-2 px-2 ${z.netProfitDollars>=0?"text-green-700":"text-red-700"}`,children:M(z.netProfitDollars)}),(0,t.jsx)("td",{}),(0,t.jsx)("td",{})]})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-800 mb-3",children:"Cumulative Net Profit"}),(0,t.jsx)(h.ResponsiveContainer,{width:"100%",height:250,children:(0,t.jsxs)(v.AreaChart,{data:z.monthly,children:[(0,t.jsx)(c.CartesianGrid,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,t.jsx)(d.XAxis,{dataKey:"month",tick:{fontSize:11}}),(0,t.jsx)(i.YAxis,{tickFormatter:S,tick:{fontSize:10}}),(0,t.jsx)(x.Tooltip,{formatter:M}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"cg",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),(0,t.jsx)(g.Area,{dataKey:"cumProfit",name:"Cumulative",stroke:"#8b5cf6",fill:"url(#cg)",strokeWidth:3})]})})]})]}),"products"===r&&(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,t.jsx)("div",{className:"col-span-5",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl border p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-800 mb-3",children:"Product Mix"}),(0,t.jsx)(h.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(u.PieChart,{children:[(0,t.jsx)(p.Pie,{data:z.productData.filter(e=>e.value>0),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:110,label:e=>e.name+" "+e.pct+"%",labelLine:{strokeWidth:1},style:{fontSize:10},children:z.productData.map((e,s)=>(0,t.jsx)(b.Cell,{fill:e.color},s))}),(0,t.jsx)(x.Tooltip,{formatter:M})]})})]})}),(0,t.jsx)("div",{className:"col-span-7",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl border p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-800 mb-3",children:"Product Details"}),(0,t.jsxs)("table",{className:"w-full text-xs",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b-2",children:[(0,t.jsx)("th",{className:"text-left py-2",children:"Product"}),(0,t.jsx)("th",{className:"text-right py-2",children:"Mix %"}),(0,t.jsx)("th",{className:"text-right py-2",children:"Avg Sale"}),(0,t.jsx)("th",{className:"text-right py-2",children:"Revenue"}),(0,t.jsx)("th",{className:"text-right py-2",children:"Projects"})]})}),(0,t.jsxs)("tbody",{children:[e.products.map((s,a)=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsxs)("td",{className:"py-2 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),s.name]}),(0,t.jsxs)("td",{className:"text-right py-2",children:[(0,t.jsx)("input",{type:"number",value:s.pct,step:.5,min:0,max:100,onChange:t=>{let r=[...e.products];r[a]={...s,pct:parseFloat(t.target.value)||0},K("products",r)},className:"w-16 text-right text-xs border rounded p-1"}),"%"]}),(0,t.jsx)("td",{className:"text-right py-2",children:(0,t.jsx)("input",{type:"number",value:s.avgSale,step:100,onChange:t=>{let r=[...e.products];r[a]={...s,avgSale:parseFloat(t.target.value)||0},K("products",r)},className:"w-20 text-right text-xs border rounded p-1"})}),(0,t.jsx)("td",{className:"text-right py-2 font-medium",children:M(z.productData[a]?.value||0)}),(0,t.jsx)("td",{className:"text-right py-2",children:z.productData[a]?.projects||0})]},s.name)),(0,t.jsxs)("tr",{className:"border-t-2 font-bold",children:[(0,t.jsx)("td",{className:"py-2",children:"TOTAL"}),(0,t.jsxs)("td",{className:"text-right py-2",children:[e.products.reduce((e,t)=>e+t.pct,0).toFixed(1),"%"]}),(0,t.jsx)("td",{className:"text-right py-2",children:M(z.avgSale)}),(0,t.jsx)("td",{className:"text-right py-2",children:M(z.revenueGoal)}),(0,t.jsx)("td",{className:"text-right py-2",children:Math.round(z.numProjects)})]})]})]}),Math.abs(e.products.reduce((e,t)=>e+t.pct,0)-100)>.1&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-red-600 font-medium bg-red-50 p-2 rounded",children:["Product mix totals ",e.products.reduce((e,t)=>e+t.pct,0).toFixed(1),"% — should be ~99-100%"]})]})})]}),"overhead"===r&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,t.jsx)("div",{className:"col-span-5",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl border p-4",children:[(0,t.jsxs)("h3",{className:"font-bold text-sm text-gray-800 mb-3",children:["Overhead (",M(z.totalOverhead),")"]}),(0,t.jsx)(h.ResponsiveContainer,{width:"100%",height:350,children:(0,t.jsxs)(n,{data:z.overheadBreakdown,layout:"vertical",children:[(0,t.jsx)(c.CartesianGrid,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,t.jsx)(d.XAxis,{type:"number",tickFormatter:S,tick:{fontSize:10}}),(0,t.jsx)(i.YAxis,{type:"category",dataKey:"name",tick:{fontSize:10},width:80}),(0,t.jsx)(x.Tooltip,{formatter:M}),(0,t.jsx)(o.Bar,{dataKey:"value",fill:"#3b82f6",radius:[0,4,4,0]})]})})]})}),(0,t.jsxs)("div",{className:"col-span-7 space-y-4",children:[(0,t.jsx)(R,{title:"Annual Totals (drag to scale monthly values)",color:"amber",children:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1",children:e.overheadItems.slice(0,12).map((s,a)=>{let r=s.monthly.reduce((e,t)=>e+t,0);return(0,t.jsx)(k,{label:s.name,value:r,onChange:t=>{let s,r,l;return l=(r=(s=e.overheadItems[a]).monthly.reduce((e,t)=>e+t,0))>0?s.monthly.map(e=>Math.round(e*t/r)):Array(12).fill(Math.round(t/12)),void K("overheadItems",e.overheadItems.map((e,t)=>t===a?{...e,monthly:l}:e))},min:0,max:Math.max(2*r,5e4),step:1e3,prefix:"$"},s.name)})})}),(0,t.jsxs)(R,{title:"Settings",color:"green",children:[(0,t.jsx)(k,{label:"Payroll Tax Rate",value:e.payrollTaxRate,onChange:e=>K("payrollTaxRate",e),min:8,max:20,step:.5,suffix:"%"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Payroll taxes on direct labor: ",M(z.payrollTaxes)]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-800",children:"Monthly Overhead by Item"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Edit each item's monthly amount. Annual column shows the sum."})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>H(!F),className:"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-lg font-medium",children:F?"Show Major Only":"Show All Items"}),(0,t.jsx)("button",{onClick:()=>{K("overheadItems",[...e.overheadItems,{name:"New Item",monthly:P(0)}])},className:"text-xs bg-blue-600 text-white px-3 py-1.5 rounded-lg hover:bg-blue-700",children:"+ Add Item"})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-xs",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b-2 border-gray-300",children:[(0,t.jsx)("th",{className:"text-left py-2 px-1 font-bold w-28",children:"Item"}),f.map(e=>(0,t.jsx)("th",{className:"text-center py-2 px-0.5 font-bold w-16",children:e},e)),(0,t.jsx)("th",{className:"text-right py-2 px-1 font-bold w-20",children:"Annual"}),(0,t.jsx)("th",{className:"py-2 w-6"})]})}),(0,t.jsxs)("tbody",{children:[e.overheadItems.map((s,a)=>{if(!F&&!E.includes(a))return null;let r=s.monthly.reduce((e,t)=>e+t,0);return(0,t.jsxs)("tr",{className:"border-b hover:bg-blue-50",children:[(0,t.jsx)("td",{className:"py-1 px-1",children:(0,t.jsx)("input",{value:s.name,onChange:t=>{let r=[...e.overheadItems];r[a]={...s,name:t.target.value},K("overheadItems",r)},className:"text-xs border rounded p-1 w-full"})}),s.monthly.map((s,r)=>(0,t.jsx)("td",{className:"py-1 px-0.5",children:(0,t.jsx)("input",{type:"number",value:s,onChange:t=>{var s;return s=parseInt(t.target.value)||0,void K("overheadItems",e.overheadItems.map((e,t)=>t===a?{...e,monthly:e.monthly.map((e,t)=>t===r?s:e)}:e))},className:"w-full text-xs text-right border rounded p-1"})},r)),(0,t.jsx)("td",{className:"text-right py-1 px-1 font-bold",children:S(r)}),(0,t.jsx)("td",{className:"text-center py-1",children:(0,t.jsx)("button",{onClick:()=>{let t=[...e.overheadItems];t.splice(a,1),K("overheadItems",t)},className:"text-red-400 hover:text-red-600 font-bold",children:"x"})})]},a)}),(0,t.jsxs)("tr",{className:"bg-gray-50 border-b",children:[(0,t.jsxs)("td",{className:"py-1 px-1 text-gray-500",children:["Payroll Tax (",e.payrollTaxRate,"%)"]}),f.map((e,s)=>(0,t.jsx)("td",{className:"text-right py-1 px-0.5 text-gray-400",children:Math.round(z.payrollTaxes/12).toLocaleString()},s)),(0,t.jsx)("td",{className:"text-right py-1 px-1 font-bold text-gray-500",children:S(z.payrollTaxes)}),(0,t.jsx)("td",{})]}),(0,t.jsxs)("tr",{className:"border-t-2 border-gray-800 font-bold bg-gray-100",children:[(0,t.jsx)("td",{className:"py-2 px-1",children:"TOTAL"}),f.map((s,a)=>(0,t.jsx)("td",{className:"text-right py-2 px-0.5",children:S(e.overheadItems.reduce((e,t)=>e+t.monthly[a],0)+z.payrollTaxes/12)},a)),(0,t.jsx)("td",{className:"text-right py-2 px-1",children:M(z.totalOverhead)}),(0,t.jsx)("td",{})]})]})]})})]})]}),"crew"===r&&(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,t.jsx)("div",{className:"col-span-7",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl border p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-800 mb-3",children:"Crew Members"}),(0,t.jsxs)("table",{className:"w-full text-xs",children:[(0,t.jsxs)("thead",{children:[(0,t.jsxs)("tr",{className:"border-b-2",children:[(0,t.jsx)("th",{className:"text-left py-2",children:"Name"}),(0,t.jsx)("th",{className:"text-right py-2",children:"Annual"}),(0,t.jsx)("th",{className:"text-center py-2",colSpan:12,children:"Active Months"})]}),(0,t.jsxs)("tr",{className:"border-b text-gray-400",children:[(0,t.jsx)("th",{}),(0,t.jsx)("th",{}),f.map(e=>(0,t.jsx)("th",{className:"text-center py-1 px-0.5",children:e.slice(0,1)},e))]})]}),(0,t.jsxs)("tbody",{children:[e.crew.map((s,a)=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"py-2",children:(0,t.jsx)("input",{value:s.name,onChange:t=>{let r=[...e.crew];r[a]={...s,name:t.target.value},K("crew",r)},className:"text-xs border rounded p-1 w-28"})}),(0,t.jsx)("td",{className:"text-right py-2",children:(0,t.jsx)("input",{type:"number",value:s.annual,step:1e3,onChange:t=>{let r=[...e.crew];r[a]={...s,annual:parseInt(t.target.value)||0},K("crew",r)},className:"text-xs border rounded p-1 w-20 text-right"})}),s.months.map((r,l)=>(0,t.jsx)("td",{className:"text-center py-2",children:(0,t.jsx)("button",{onClick:()=>{let t=[...e.crew],r=[...s.months];r[l]=+!r[l],t[a]={...s,months:r},K("crew",t)},className:`w-5 h-5 rounded text-xs ${r?"bg-blue-500 text-white":"bg-gray-200"}`,children:r?"Y":""})},l))]},a)),(0,t.jsxs)("tr",{className:"border-b bg-blue-50",children:[(0,t.jsx)("td",{className:"py-2 font-medium",children:e.shopManager.name}),(0,t.jsx)("td",{className:"text-right py-2",children:(0,t.jsx)("input",{type:"number",value:e.shopManager.annual,step:1e3,onChange:t=>K("shopManager",{...e.shopManager,annual:parseInt(t.target.value)||0}),className:"text-xs border rounded p-1 w-20 text-right"})}),f.map((e,s)=>(0,t.jsx)("td",{className:"text-center py-2",children:(0,t.jsx)("div",{className:"w-5 h-5 rounded bg-blue-500 text-white text-xs flex items-center justify-center mx-auto",children:"Y"})},s))]}),(0,t.jsxs)("tr",{className:"border-t-2 font-bold",children:[(0,t.jsx)("td",{className:"py-2",children:"TOTAL LABOR"}),(0,t.jsx)("td",{className:"text-right py-2",children:M(z.directLabor)}),(0,t.jsx)("td",{colSpan:12})]})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>K("crew",[...e.crew,{name:"New Hire "+(e.crew.length+1),annual:35e3,months:[0,0,0,0,1,1,1,1,1,1,1,0]}]),className:"text-xs bg-blue-600 text-white px-3 py-1.5 rounded-lg hover:bg-blue-700",children:"+ Add Crew"}),e.crew.length>1&&(0,t.jsx)("button",{onClick:()=>K("crew",e.crew.slice(0,-1)),className:"text-xs bg-red-100 text-red-600 px-3 py-1.5 rounded-lg hover:bg-red-200",children:"Remove Last"})]})]})}),(0,t.jsxs)("div",{className:"col-span-5 space-y-4",children:[(0,t.jsx)(R,{title:"Crews / Month",color:"blue",children:f.map((s,a)=>(0,t.jsx)(k,{label:s,value:e.crewsByMonth[a],onChange:t=>{let s=[...e.crewsByMonth];s[a]=t,K("crewsByMonth",s)},min:0,max:6,step:.5},s))}),(0,t.jsx)(R,{title:"Labor Summary",color:"green",children:(0,t.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Direct Labor"}),(0,t.jsx)("span",{className:"font-bold",children:M(z.directLabor)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:["Commissions (",e.commissionPct,"%)"]}),(0,t.jsx)("span",{className:"font-bold",children:M(z.revenueGoal*e.commissionPct/100)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Payroll Taxes"}),(0,t.jsx)("span",{className:"font-bold",children:M(z.payrollTaxes)})]}),(0,t.jsxs)("div",{className:"flex justify-between border-t pt-2 font-bold",children:[(0,t.jsx)("span",{children:"Total Labor"}),(0,t.jsx)("span",{children:M(z.totalCOGSLabor)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Labor %"}),(0,t.jsx)("span",{className:"font-bold",children:C(z.laborPct)})]})]})}),(0,t.jsxs)(R,{title:"Debt Service",color:"red",children:[(0,t.jsxs)("table",{className:"w-full text-xs mb-2",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left py-1",children:"Name"}),(0,t.jsx)("th",{className:"text-right py-1",children:"Annual"}),(0,t.jsx)("th",{className:"text-right py-1",children:"Monthly"}),(0,t.jsx)("th",{className:"py-1 w-6"})]})}),(0,t.jsxs)("tbody",{children:[e.debts.map((s,a)=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"py-1",children:(0,t.jsx)("input",{value:s.name,onChange:t=>{let r=[...e.debts];r[a]={...s,name:t.target.value},K("debts",r)},className:"text-xs border rounded p-1 w-full"})}),(0,t.jsx)("td",{className:"text-right py-1",children:(0,t.jsx)("input",{type:"number",value:s.annual,step:600,onChange:t=>{let r=[...e.debts];r[a]={...s,annual:parseInt(t.target.value)||0},K("debts",r)},className:"text-xs border rounded p-1 w-20 text-right"})}),(0,t.jsx)("td",{className:"text-right py-1 text-gray-500",children:M(Math.round(s.annual/12))}),(0,t.jsx)("td",{className:"text-center py-1",children:(0,t.jsx)("button",{onClick:()=>{let t=[...e.debts];t.splice(a,1),K("debts",t)},className:"text-red-400 hover:text-red-600 text-sm font-bold",children:"x"})})]},a)),(0,t.jsxs)("tr",{className:"border-t-2 font-bold",children:[(0,t.jsx)("td",{className:"py-1",children:"TOTAL"}),(0,t.jsx)("td",{className:"text-right py-1",children:M(z.debtService)}),(0,t.jsx)("td",{className:"text-right py-1",children:M(Math.round(z.debtService/12))}),(0,t.jsx)("td",{})]})]})]}),(0,t.jsx)("button",{onClick:()=>K("debts",[...e.debts,{name:"New Debt "+(e.debts.length+1),annual:0}]),className:"text-xs bg-red-100 text-red-700 px-3 py-1.5 rounded-lg hover:bg-red-200 w-full",children:"+ Add Debt Item"})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 mb-4",children:[(0,t.jsxs)("button",{onClick:()=>D(!A),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:[A?"Hide":"Show"," Strategy Notes"]}),A&&(0,t.jsxs)("div",{className:"mt-3 bg-blue-50 border border-blue-200 rounded-xl p-4 text-xs text-gray-700 space-y-2",children:[(0,t.jsx)("p",{className:"font-bold text-blue-800",children:"Key levers to reach profitability in 2026:"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"1. Materials:"})," Every 1% reduction on $2M revenue saves ~$20K. Negotiate bulk pricing, reduce waste."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"2. Revenue per man hour:"})," $130 to $145+ via better scheduling, less downtime between jobs."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"3. Overhead payroll:"})," Biggest single overhead item. Can roles be consolidated?"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"4. Advertising ROI:"})," Spend more May-Aug, cut winter. Track cost-per-lead by channel."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"5. Product mix:"})," Push Avimore and Bufftech for higher margins."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"6. Seasonal cash:"})," Q1/Q2 losses are normal for fencing. Build reserves from Q3/Q4."]})]})]})]}),O&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>L(!1),children:(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full mx-4 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h2",{className:"font-bold text-lg",children:"save"===O?"Save Settings":"Load Settings"}),(0,t.jsx)("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600 text-xl font-bold",children:"x"})]}),"save"===O?(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Copy the text below and save it somewhere. Paste it back using Load to restore."}),(0,t.jsx)("textarea",{readOnly:!0,value:I,onClick:e=>e.target.select(),className:"w-full h-32 text-xs font-mono border rounded-lg p-3 bg-gray-50"}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText(I).then(()=>G("Copied!")).catch(()=>G("Select all and copy manually"))},className:"mt-3 w-full bg-blue-600 text-white py-2 rounded-lg text-sm font-medium hover:bg-blue-700",children:"Copy to Clipboard"})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Paste your previously saved settings below. Supports both old and new format."}),(0,t.jsx)("textarea",{value:I,onChange:e=>$(e.target.value),placeholder:"Paste your saved settings here...",className:"w-full h-32 text-xs font-mono border rounded-lg p-3"}),(0,t.jsx)("button",{onClick:()=>{try{let e=function(e){if(e.overhead&&!e.overheadItems){let t=e.overhead,s=e=>Array(12).fill(Math.round((e||0)/12));e.overheadItems=[{name:"Rent",monthly:s(t.rent)},{name:"Advertising",monthly:e.adMonthly||s(t.advertising)},{name:"Insurance",monthly:s(t.insurance)},{name:"OH Payroll",monthly:s(t.ohPayroll)},{name:"Utilities",monthly:s(t.utilities)},{name:"Fuel",monthly:s(t.fuel)},{name:"Benefits",monthly:s(t.benefits)},{name:"Leases",monthly:s(t.leases)},{name:"Repairs",monthly:s(t.repairs)},{name:"Small Tools",monthly:s(t.smallTools)},{name:"Office Supplies",monthly:s(t.officeSupplies)},{name:"Prof Fees",monthly:s(t.profFees)},{name:"Bad Debts",monthly:s(t.badDebts)},{name:"Education",monthly:s(t.education)},{name:"Travel",monthly:s(t.travel)},{name:"Uniforms",monthly:s(t.uniforms)},{name:"Shop Supplies",monthly:s(t.shopSupplies)},{name:"Shipping",monthly:s(t.shipping)},{name:"Dump Fees",monthly:s(t.dumpFees)},{name:"Meals",monthly:s(t.meals)},{name:"Entertainment",monthly:s(t.entertainment)},{name:"Misc",monthly:s(t.misc)}],e.payrollTaxRate=t.payrollTaxRate||13,delete e.overhead,delete e.adMonthly,delete e.ohMonthlyPct}return e}(JSON.parse(I));e.overheadPct&&e.overheadItems?(a(e),G("Settings loaded!"),setTimeout(()=>{L(!1),G("")},1e3)):G("Invalid data — missing required fields")}catch{G("Invalid JSON — check your pasted data")}},className:"mt-3 w-full bg-blue-600 text-white py-2 rounded-lg text-sm font-medium hover:bg-blue-700",children:"Load Settings"})]}),B&&(0,t.jsx)("div",{className:`mt-2 text-sm text-center font-medium ${B.includes("!")?"text-green-600":"text-red-600"}`,children:B})]})})]})}e.s(["default",()=>A],30210)}]);